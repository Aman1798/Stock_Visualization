<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Visualization</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet">
    <link rel="stylesheet" href="libs/font-awesome/css/font-awesome.min.css">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Link to the styles.css file -->
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Tooltip style */
        .tooltip {
            position: absolute;
            background-color: #fff;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            pointer-events: none;
            opacity: 0;
        }
        

    </style>
</head>
    <header>
        <ul id="menu" class="shadow">
            <li>
                <a href="#home"><strong>Home</strong></a>
            </li>
            <li>
                <a href="#question1"><strong>Question1</strong></a>
            </li>
            <li>
                <a href="#question2"><strong>Question2</strong></a>
            </li>
            <li>
                <a href="#question3"><strong>Question3</strong></a>
            </li>
        </ul>
    </header>
    <!-- End header -->

    <!-- Home section -->
    <div id="home" class="background-alt">
        <div id="lead">
            <div id="lead-content">
                <h1>Amandeep Singh</h1>
                <div id="intro-text">
                    <h4><u>Financial Data Analysis</u></h4>
                    <p> 
                        Gaining an understanding of the subtleties of the market can be a complex process that frequently requires in-depth research of financial data. This kind of analysis usually focuses on three main areas: stock price performance, historical data analysis of certain companies (like AAPL), and predictive analytics application.
                        <p>
                    
                            <p>
                        Value of Stock Understanding market dynamics begins with performance analysis. Through a thorough analysis of the extended-term performance of different equities, analysts can identify underlying trends, patterns of volatility, and possible attitudes within the market. Better understanding of how stock prices behave over time is made possible by the simplification of complex data sets using visual representations of historical performance.
                        <p>
                    
                            <p>
                        Examining AAPL Historical Data provides a broad perspective on the development of the market over almost thirty years, from 1996 to 2024. This extensive dataset sheds light on important milestones, economic shifts, and technical developments that have impacted AAPL's trajectory and, consequently, the broader market landscape. It offers crucial insights into the ups and downs of market trends.
                        <p>
                    
                            <p> 
                        Financial analysis gains a forward-looking perspective through predictive analytics, however not without its own set of difficulties. Although past data is a major source of guidance for future trend forecasts, markets are inherently unpredictable, thus caution is required. Even with their sophistication, machine learning models are susceptible to the intricacies of market dynamics. Although they provide useful predictive powers, their results should be used cautiously, considering the risks and uncertainties that come with financial forecasting.
                        <p>
                </div>
            </div>
        </div>
    </div>
    <!-- End Home -->

    <!-- Question1 section -->
<div id="question1" class="background-alt">
    <div class="container">
        <div class="row">
            <div class="col-md-6 project-info">
                <h1 class="heading"><strong><u>Question 1</u></strong></h1>
                <h1 class="heading"><strong><u>Stock Price Performance Over Time</u></strong></h1>
                <h4></strong>(Made with D3.js)</strong></h4>

                <!-- Container for D3 visualization merged_df.csv -->
                <div id="chart-container">
                    <select id="stock-select" onchange="filterStocks(Array.from(this.selectedOptions, option => option.value))" multiple>
                        <option value="">All Stocks</option>
                    </select>
                    <button class="zoom-button" id="zoom-button-in-left">Zoom In</button>
                    <button id="reset-button-left">Reset</button>
                    
                </div>
                
                <p>
                    A D3.js line chart that visualizes stock data provides a thorough grasp of past price movements for different types of stocks. Every stock is represented by a unique line that offers information about historical trends and possible future paths. Through examining the angles and orientations of these lines, observers can identify trends that are suggestive of performance. Flat lines denote stability, upward slopes represent rises in price, while downward slopes reflect decreases in price. Furthermore, it is possible to find correlations between stock performances, which disclose similar affecting elements like economic conditions or industry trends.

To make the analysis easier, more than thirty CSV files were combined into a single dataset called "merged_df.csv," where the "stock_name" column represents each stock. This combined dataset makes it possible to use visualization techniques to thoroughly examine stock data. Plotting the years on the x-axis and closing prices on the y-axis, the resulting time-series graph shows the general trajectories of the stocks over time. This macroscopic perspective shows a positive general trend in the market, which is upward.

Beneath this broad trend, though, are subtle variations unique to every stock. For example, whereas the closing prices of BA stock increased significantly between 2018 and 2019, the closing prices of PG, PFE, and TRV stocks remained relatively stable. A closer look reveals some interesting features in individual stocks: UNH shows exponential rise since 2017, while GS saw a significant dip in 2019 followed by a partial rebound.

In conclusion, the combination of visual analysis and stock data analysis offers important new perspectives on the intricacies of the market. It is an invaluable tool that investors and analysts use to make well-informed decisions and carry out strategic planning in the financial sector.

                </p>
                <!-- Container for D3 visualization merged_stock_data.csv -->
<div id="stock-chart-container">
    <div id="filter-container2"> <!-- New container for the filter button -->
        <select id="stock-select2" onchange="filterStocks2(Array.from(this.selectedOptions, option => option.value))" multiple>
            <!-- Chart will be drawn here -->
        </select>
        <button class="zoom-button" id="zoom-button-in-right">Zoom In</button>
        <button id="reset-button-right">Reset</button>
        
    </div>
</div>

                    <p>
                        We have used D3.js to create several graphs, each of which represents a stock that can be found in the CSV files. 
                        These graphic depictions show each stock's closing price over time along with two moving averages (MA): a 20-day MA and a 50-day MA. 
                        Plotted dates, usually spanning several months or years, are shown on the X-axis, while the stock price is shown on the Y-axis. 
                        Every graph shows three different lines. The Close Price, which reflects the price at which the stock ended trading each day and is 
                        susceptible to changes based on market activity, is shown in the first line. The 20-day Moving Average (MA) and the 50-day 
                        Moving Average (MA) are shown in the second and third lines, respectively. These moving averages, which are derived by averaging 
                        closing prices over the previous 20 and 50 days, respectively, provide a more realistic representation of the closing price of the 
                        stock.This smoothing technique reduces short-term price volatility, which aids in trend identification. Important information 
                        about the trend of the stock can be obtained by closely examining the interactions between the price line and the MAs. 
                        A negative trend, for example, could be indicated by persistent trading below both the 20-day and 50-day MAs, while an 
                        upward trend could be indicated by a consistent trading pattern above both MAs. On the other hand, if the price line crosses the MAs,
                         it can indicate that the market is becoming more erratic or that the trend is changing.
                    </p>
            </div>
        </div>
    </div>
</div>
<!-- End #question1 -->

    <!-- Question2 section -->
    <div id="question2" class="background-alt">
        <div class="container">
            <div class="row">
                <div class="col-md-6 project-info">
                    <h1 class="heading"><strong><u>Question 2</u></strong></h1>
                    <h1 class="heading"><strong><u>AAPL Candlestick chart over a period of 1996-2024</u></strong></h1>
                    <h4></strong>(Made with Python)</strong></h4>
                    <div class="col-md-6 project-image">
                        <img src="images/stock2.png" alt="Image2" />
                    </div>
                    <p>
                        The graph illustrates Apple's stock market trajectory and captures the company's amazing development over almost thirty years. The graph represents Apple's path of invention and resiliency, from the slight upswing in the late 1990s amid the dot-com bubble to the explosive surge sparked by ground-breaking products like the iPod, iPhone, and iPad.

This historical story is followed by the data preparation procedure. Using the 'yfinance' library, historical data for the AAPL index is obtained and refined, emphasizing key characteristics such as Open, High, Low, Close and Volume. To make the dataset more streamlined, unnecessary columns like Dividends and Stock Splits are removed.

The result of these procedures is the visualization, which is a Candlestick graph that shows the price and Volume of the AAPL index from 1996 to 2024. This graphic illustrates the index's general increasing trajectory throughout the years, which reflects not only Apple's success but also the state of the economy.

The painstaking data pre-processing procedures are woven throughout Apple's story, reflecting the company's trajectory of innovation and adaptation. As the graph develops, it not only documents Apple's previous successes and setbacks but also provides insight into the company's likely future course. As Apple persists in pushing technological frontiers, the graph bears witness to the everlasting appeal of creativity and the potency of insights derived from data. When combined, they provide an engrossing look into Apple's history, current state, and prospects in the volatile world of the stock market.

Candlestick analysis reveals Apple's upward stock trend, supported by green candlesticks denoting price increase. Long wicks indicate high volatility, showcasing significant price swings. This volatility correlates with trading volume, with spikes during turbulent periods and decreases during stability, reflecting investor reactions to price changes.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- End #question2 -->

    <!-- Question3 section -->
    <div id="question3" class="background-alt">
        <div class="container">
            <div class="row">
                <div class="col-md-6 project-info">
                    <h1 class="heading"><strong><u>Question 3</u></strong></h1>
                    <h1 class="heading"><strong><u>Predict the movement of the AAPL index using a machine learning model</u></strong></h1>
                    <h4></strong>(Made with Python)</strong></h4>
                    <div class="col-md-6 project-image">
                        <img src="images/stock3.png" alt="Image3" />
                    </div>
                    <p>
                        Using rolling averages and new predictors from historical data, the Random Forest Classifier is enhanced in the AAPL index prediction system. Thoroughly examined by past backtesting, the precision score is an essential factor in determining the accuracy of positive forecasts. Context for price increases and decreases can be found by looking at the class distribution, and visual graphs make it easier to compare expectations with actual outcomes. This detailed assessment allows for well-informed modifications to the trading strategy, increasing its effectiveness.

The prediction code makes use of libraries such as sklearn for machine learning, matplotlib for visualization, numpy for numerical calculations, pandas for manipulation, and yfinance for data retrieval. Pre-processed historical AAPL index data is retrieved and includes target column creation to indicate price fluctuations as well as column deletion. The Random Forest Classifier is trained, and its precision evaluated after feature selection divides the data into training and testing sets.

Model performance is assessed under various market conditions through back testing across several historical periods. Rolling averages and trends are used to create new predictors that are integrated to increase performance. The improvements are then evaluated through back testing and retraining. The trading strategy can be assessed and improved with the help of charts that show actual values compared to expected values, which demonstrate forecast accuracy.

This thorough method guarantees a strong foundation for assessing and forecasting changes in the AAPL index, enabling knowledgeable financial decision-making.


                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- End #question3 -->

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-sm-5 copyright">
                    <p>
                        Copyright &copy; <span id="current-year">2024</span> Amandeep Singh
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <!-- End footer -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="js/scripts.min.js"></script>

    <script src="https://d3js.org/d3.v7.min.js"></script>

    <script src="script.js"></script>

    <script>
        // Load data
        d3.csv("merged_df.csv").then(function(data) {
            // Convert date strings to JavaScript Date objects
            data.forEach(function(d) {
                d.date = new Date(d.date);
            });
    
            // Set up dimensions
            var margin = { top: 60, right: 30, bottom: 60, left: 60 }; // Adjusted margins for axis labels
            var width = 800 - margin.left - margin.right;
            var height = 400 - margin.top - margin.bottom;
    
            // Append SVG
            var svg = d3.select("#chart-container")
                        .append("svg")
                        .attr("width", width + margin.left + margin.right)
                        .attr("height", height + margin.top + margin.bottom)
                        .append("g")
                        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    
            // Set up scales
            var x = d3.scaleTime().domain(d3.extent(data, function(d) { return d.date; })).range([0, width]);
            var y = d3.scaleLinear().domain([0, d3.max(data, function(d) { return +d.close; })]).nice().range([height, 0]);
    
            // Set up axes
            var xAxis = d3.axisBottom().scale(x);
            var yAxis = d3.axisLeft().scale(y);
            
            // Append axes
            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis);

            // Append x-axis label
            svg.append("text")
                .attr("class", "axis-label")
                .attr("text-anchor", "middle")
                .attr("x", width / 2)
                .attr("y", height + 40)
                .text("Date");    

            svg.append("g")
                .attr("class", "y axis")
                .call(yAxis);

            // Append y-axis label
            svg.append("text")
                .attr("class", "axis-label")
                .attr("text-anchor", "middle")
                .attr("transform", "rotate(-90)")
                .attr("x", -height / 2)
                .attr("y", -40)
                .text("Closing Price");
    
            // Set up line generator
            var line = d3.line()
                         .x(function(d) { return x(d.date); })
                         .y(function(d) { return y(d.close); });
    
            // Draw lines for each stock
            var stocks = Array.from(new Set(data.map(function(d) { return d.stock_name; })));
            var colorScale = d3.scaleOrdinal(d3.schemeCategory10);
            stocks.forEach(function(stock, i) {
                var filteredData = data.filter(function(d) { return d.stock_name === stock; });
                var stockPath = svg.append("path")
                                   .datum(filteredData)
                                   .attr("class", "line " + stock.replace(/\s/g, ''))
                                   .attr("d", line)
                                   .style("stroke", colorScale(stock)) // Assign unique color to each line
                                   .style("display", stock === 'AAPL' ? "block" : "none") // Hide all lines except AAPL initially
                                   .on("mouseover", function(event, d) {
                                       var bisect = d3.bisector(function(d) { return d.date; }).left;
                                       var x0 = x.invert(d3.pointer(event)[0]);
                                       var i = bisect(d, x0, 1);
                                       var selectedData = d[i];

                                       tooltip.transition()
                                              .duration(100)
                                              .style("opacity", .9);
                                       tooltip.html(`Date: ${selectedData.date.toLocaleDateString()} <br> Price: ${selectedData.close}`)
                                              .style("left", (event.pageX + 10) + "px")
                                              .style("top", (event.pageY - 28) + "px");
                                   })
                                   .on("mouseout", function(d) {
                                       tooltip.transition()
                                              .duration(200)
                                              .style("opacity", 0);
                                   });
            });
    
            // Populate select box with stock names
            var selectBox = document.getElementById("stock-select");
            stocks.forEach(function(stock) {
                var option = document.createElement("option");
                option.text = stock;
                option.value = stock.replace(/\s/g, '');
                selectBox.appendChild(option);
            });
    
            // Set AAPL as default selection
            selectBox.value = "AAPL";
        
            // Define tooltip
            var tooltip = d3.select("body").append("div")
                            .attr("class", "tooltip")
                            .style("opacity", 0);
        });

        
    
       // Function to filter lines based on stock names
        function filterStocks(selectedStocks) {
            var svg = d3.select("#chart-container svg");
            svg.selectAll(".line").style("display", "none"); // Hide all lines

            if (selectedStocks.includes("")) {
                svg.selectAll(".line").style("display", "block"); // Show all lines if "All Stocks" is selected
            } else {
                selectedStocks.forEach(function(stockName) {
                    svg.selectAll("." + stockName).style("display", "block"); // Show selected stock lines
                });
            }
        }

    </script>
    
    
    <script>
        // Load data
        d3.csv("merged_stock_data.csv").then(function(data) {
            // Extract unique stock names
            var stockNames = Array.from(new Set(data.map(d => d.stock_name)));
    
            // Add options to select element
            d3.select("#stock-select2")
                .selectAll("option")
                .data(stockNames)
                .enter()
                .append("option")
                .text(d => d);
    
            // Set initial stock selection
            var selectedStock = "AAPL"; // Set AAPL as default selection
    
            // Draw initial chart
            drawChart2(selectedStock);
    
            // Add event listener to select element
            d3.select("#stock-select2").on("change", function() {
                var selectedOption = d3.select(this).property("value");
                drawChart2(selectedOption);
            });
    
            // Function to draw chart
            function drawChart2(stock) {
                // Clear previous chart
                d3.select("#stock-chart-container").selectAll("svg").remove();
    
                // Filter data for selected stock
                var filteredData = data.filter(d => d.stock_name === stock);
    
                // Convert date strings to Date objects
                filteredData.forEach(function(d) {
                    d.date = new Date(d.date);
                    d.close = +d.close; // Convert close prices to numbers
                });
    
                // Set up dimensions
                var margin = { top: 20, right: 30, bottom: 60, left: 60 };
                var width = 800 - margin.left - margin.right;
                var height = 400 - margin.top - margin.bottom;
    
                // Create SVG element
                var svg = d3.select("#stock-chart-container")
                    .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    
                // Calculate the minimum close price for the selected stock
                var minClose = d3.min(filteredData, d => d.close);
    
                // Create scales
                var xScale = d3.scaleTime().domain(d3.extent(filteredData, d => d.date)).range([0, width]);
                var yScale = d3.scaleLinear().domain([minClose, d3.max(filteredData, d => d.close)]).nice().range([height, 0]);
    
                // Define line functions
                var line = d3.line()
                    .x(d => xScale(d.date))
                    .y(d => yScale(d.close));
    
                var twentyLine = d3.line()
                    .x(d => xScale(d.date))
                    .y(d => yScale(d["20_MA"]));
    
                var fiftyLine = d3.line()
                    .x(d => xScale(d.date))
                    .y(d => yScale(d["50_MA"]));
    
                // Append paths
                var path = svg.append("path")
                    .datum(filteredData)
                    .attr("fill", "none")
                    .attr("stroke", "red")
                    .attr("d", line);
    
                svg.append("path")
                    .datum(filteredData)
                    .attr("fill", "none")
                    .attr("stroke", "darkgreen")
                    .attr("d", twentyLine);
    
                svg.append("path")
                    .datum(filteredData)
                    .attr("fill", "none")
                    .attr("stroke", "blue")
                    .attr("d", fiftyLine);
    
                // Append data points for close price
                svg.selectAll(".close-point")
                    .data(filteredData)
                    .enter()
                    .append("circle")
                    .attr("class", "close-point")
                    .attr("cx", d => xScale(d.date))
                    .attr("cy", d => yScale(d.close))
                    .attr("r", 3)
                    .attr("fill", "red")
                    .append("title")
                    .text(d => `Date: ${d3.timeFormat("%Y-%m-%d")(d.date)}\nClose Price: ${d.close}`);
    
                // Append data points for 20-MA
                svg.selectAll(".twenty-point")
                    .data(filteredData)
                    .enter()
                    .append("circle")
                    .attr("class", "twenty-point")
                    .attr("cx", d => xScale(d.date))
                    .attr("cy", d => yScale(d["20_MA"]))
                    .attr("r", 3)
                    .attr("fill", "darkgreen")
                    .append("title")
                    .text(d => `Date: ${d3.timeFormat("%Y-%m-%d")(d.date)}\n20-MA: ${d["20_MA"]}`);
    
                // Append data points for 50-MA
                svg.selectAll(".fifty-point")
                    .data(filteredData)
                    .enter()
                    .append("circle")
                    .attr("class", "fifty-point")
                    .attr("cx", d => xScale(d.date))
                    .attr("cy", d => yScale(d["50_MA"]))
                    .attr("r", 3)
                    .attr("fill", "blue")
                    .append("title")
                    .text(d => `Date: ${d3.timeFormat("%Y-%m-%d")(d.date)}\n50-MA: ${d["50_MA"]}`);
    
                // Add legend
                var legend = svg.append("g")
                    .attr("class", "legend")
                    .attr("transform", "translate(" + (width - 100) + "," + 20 + ")");
    
                legend.append("rect")
                    .attr("x", 0)
                    .attr("y", 0)
                    .attr("width", 10)
                    .attr("height", 10)
                    .style("fill", "red");
    
                legend.append("text")
                    .attr("x", 15)
                    .attr("y", 10)
                    .text("Close Price");
    
                legend.append("rect")
                    .attr("x", 0)
                    .attr("y", 20)
                    .attr("width", 10)
                    .attr("height", 10)
                    .style("fill", "darkgreen");
    
                legend.append("text")
                    .attr("x", 15)
                    .attr("y", 30)
                    .text("20-MA");
    
                legend.append("rect")
                    .attr("x", 0)
                    .attr("y", 40)
                    .attr("width", 10)
                    .attr("height", 10)
                    .style("fill", "blue");
    
                legend.append("text")
                    .attr("x", 15)
                    .attr("y", 50)
                    .text("50-MA");
    
                // Add axes
                svg.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(xScale));
    
                // Append x-axis label
                svg.append("text")
                    .attr("class", "axis-label")
                    .attr("text-anchor", "middle")
                    .attr("x", width / 2)
                    .attr("y", height + 40)
                    .text("Date");
    
                svg.append("g")
                    .call(d3.axisLeft(yScale));
    
                // Append y-axis label
                svg.append("text")
                    .attr("class", "axis-label")
                    .attr("text-anchor", "middle")
                    .attr("transform", "rotate(-90)")
                    .attr("x", -height / 2)
                    .attr("y", -40)
                    .text("Price");
            }
        });
    </script>   

<script>
    // Zoom functionality for the left chart
    document.getElementById("zoom-button-in-left").addEventListener("click", function () {
        zoomIn("#chart-container");
    });

    // Zoom functionality for the right chart
    document.getElementById("zoom-button-in-right").addEventListener("click", function () {
        zoomIn("#stock-chart-container");
    });

    // Reset functionality for both charts
    document.getElementById("reset-button-left").addEventListener("click", function () {
        resetZoom("#chart-container");
    });

    document.getElementById("reset-button-right").addEventListener("click", function () {
        resetZoom("#stock-chart-container");
    });

    // Function to zoom in on a chart container
    function zoomIn(containerId) {
        var container = d3.select(containerId);
        var currentScale = parseFloat(container.attr("data-scale")) || 1;
        var newScale = currentScale * 1.2; // Zoom factor: 1.2

        container.attr("data-scale", newScale);

        container.transition()
            .duration(500)
            .style("transform", "scale(" + newScale + ")");
    }

    
    // Function to reset zoom on a chart container
    function resetZoom(containerId) {
        var container = d3.select(containerId);
        container.attr("data-scale", 1);

        container.transition()
            .duration(500)
            .style("transform", "scale(1)");
    }
</script>

<!-- Tooltip -->
<div class="tooltip" style="opacity: 0;"></div>

</body>

</html>